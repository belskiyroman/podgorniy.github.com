#Оптимизация



##Что надо оптимизировать?

1. DOM манипуляции
2. Повторяющиеся действия (анимация, циклы)

<small>Чаще всего - ничего</small>


##Нельзя

1. Заниматься преждевременной оптимизацией (не считая очевидных вещей, как кеширование переменных на DOM узлы)
2. Заниматься оптимизацией, исходя из непроверенных положений
3. Оптимизировать в ущерб читаемости, завершенности проекта (без очевидной необходимости на то)


##Типы оптимизаций

* Оптимизация ресурсов
* Производительность

<small>Зачастую одно за счет другого</small>



##Оптимизация ресурсов

* Минификация, обфускация
* GZIP
* Уменьшение количества запросов (объединение файлов, data:uri)



##Минификация, обфускация

Удаление пробелов, комментариев, переименование переменных и функций. Зачастую выполняется автоматически.


##Минификация, обфускация

* Цель - уменьшить объем данных, передаваемых на клиент
* Сделать код трудночитаемым
* Обфусцированный код зачастую требует дополнительных ресурсов для интерпретации 

[Google closure compiler](http://closure-compiler.appspot.com/home), [uglifyjs](http://marijnhaverbeke.nl/uglifyjs)



##GZIP

* Цель - уменьшить объем данных, передаваемых на клиент
* ие6 не поддерживает
* Требуются дополнительные ресурсы на распаковку
* Настраивается на уровне сервера


##data:uri

Вставка изображений и ресурсов непосредственно в файл  
<small>не в виде внешнего ресурса</small>


##data:uri
[Пример](http://jsfiddle.net/podgorniy/TANKp/)


##data:uri

Последствия использования

* Уменьшение количества запросов к серверу
* Сложнее редактировать изображения
* Объем передаваемых данных увеличивается (по сравнению с бинарным представлением ресурсов)
* Частичная поддержка в [ИЕ](http://caniuse.com/#feat=datauri)



##Производительность

В реальном мире интерес составляет субъективное ощущение скорости работы приложения



##Ускоряем DOM

* Кеширование переменных
* Минимальное количество обращений к DOM методам
* При анимации: сначала чтение, потом присвоение значений



##Инструменты для проверки оптимизаций

* Множественный прогон тестов
* console.time
* одинаковая методология <small>Велика вероятность</small>
* [http://jsperf.com](http://jsperf.com)